name: Supabase Heartbeat

on:
  schedule:
    - cron: '0 9 */3 * *'
  workflow_dispatch:

jobs:
  heartbeat:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
      - run: |
          echo "❤️  Sending heartbeat to Supabase..."
          curl -s -X POST "https://lkvcbpxkpwpoqjlcddgl.functions.supabase.co/submit-form" \
            -H "Content-Type: application/json" \
            -d '{"heartbeat":true,"timestamp":"'"$(date)"'"}' > /dev/null
          echo "✅ Heartbeat sent at $(date)"
