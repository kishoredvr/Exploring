name: Keep Supabase Alive

on:
  schedule:
    - cron: "0 */10 * * *"  # every 10 hours
  workflow_dispatch:

jobs:
  keep-alive:
    runs-on: ubuntu-latest

    steps:
      - name: Send full form payload (mimics actual MessageMe.html submission)
        run: |
          curl -X POST "https://lkvcbpxkpwpoqjlcddgl.functions.supabase.co/submit-form" \
          -H "Content-Type: application/json" \
          -d '{
            "name": "Automated KeepAlive",
            "email": "keepalive@system.bot",
            "mobileNumber": "0000000000",

            "purpose": "Other",
            "astroServiceSelect": "Not applicable",
            "astro_service_tier": "not applicable",

            "birthDetailsAvailable": "Not applicable",
            "dob": "Not applicable",
            "hour": "Not applicable",
            "minute": "Not applicable",
            "second": "Not applicable",
            "explanation": "Not applicable",

            "city": "Not applicable",
            "state": "Not applicable",
            "country": "Not applicable",
            "pincode": "Not applicable",

            "gender": "Not applicable",
            "genderOtherInput": "Not applicable",

            "accuracy": "Not applicable",

            "contactCountry": "System",

            "expectations": "Automated keep-alive submission to prevent Supabase cold start.",

            "phonepe_txn_id": "",
            "phonepe_order_id": "",
            "payment_amount": "0",
            "payment_status": "not applicable",

            "submittedAt": "'"$(date -Iseconds)"'"
          }'
