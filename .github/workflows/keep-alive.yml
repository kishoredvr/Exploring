name: Keep Supabase Alive

on:
  schedule:
    - cron: "0 */10 * * *"   # Every 10 hours
  workflow_dispatch:

jobs:
  ping-supabase:
    runs-on: ubuntu-latest

    steps:
      - name: Send automated "Other Purpose" submission
        run: |
          curl -X POST "https://lkvcbpxkpwpoqjlcddgl.functions.supabase.co/submit-form" \
          -H "Content-Type: application/json" \
          -d '{
            "purpose": "Other",
            "name": "Automated Keep-Alive",
            "email": "keepalive@system.local",
            "mobileNumber": "0000000000",
            "contactCountry": "System",
            "expectations": "Keep-alive ping to prevent Supabase cold start.",
            "payment_status": "not applicable",
            "payment_amount": "0",
            "astro_service_tier": "not applicable",
            "phonepe_txn_id": "",
            "phonepe_order_id": "",
            "submittedAt": "'"$(date -Iseconds)"'"
          }'
