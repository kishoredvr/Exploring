name: Daily Keep-Alive
on:
  schedule:
    - cron: '0 2 * * *'  # 2 AM UTC daily
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - run: |
          curl -X POST "https://lkvcbpxkpwpoqjlcddgl.functions.supabase.co/submit-form" \
            -H "Content-Type: application/json" \
            -d '{"purpose":"Other","name":"Keep Alive","email":"keep-alive-'$(date +%s)'@example.com","mobileNumber":"9876543210","contactCountry":"Test","expectations":"Daily ping","submittedAt":"'$(date -u +"%Y-%m-%dT%H:%M:%S.000Z")'"}' \
            --max-time 30 \
            --silent || true
          
          echo "âœ… Daily keep-alive executed at $(date)"
