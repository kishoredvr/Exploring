name: Keep Supabase Alive

on:
  schedule:
    - cron: "0 */10 * * *"
  workflow_dispatch:

jobs:
  keepalive:
    runs-on: ubuntu-latest

    steps:
      - name: Send realistic Other Purpose submission (exactly like frontend)
        run: |
          curl -X POST "https://lkvcbpxkpwpoqjlcddgl.functions.supabase.co/submit-form" \
          -H "Content-Type: application/json" \
          -d '{
            "name": "System KeepAlive Bot",
            "email": "keepalive@system.bot",
            "mobileNumber": "9999999999",

            "purpose": "Other",

            "astroServiceSelect": "Not applicable",
            "astro_service_tier": "not applicable",

            "birthDetailsAvailable": "Not applicable",

            "dob": "",
            "hour": "",
            "minute": "",
            "second": "",
            "explanation": "",

            "city": "",
            "state": "",
            "country": "",
            "pincode": "",

            "gender": "Not applicable",
            "genderOtherInput": "",

            "accuracy": "Not applicable",

            "contactCountry": "System",

            "expectations": "Automated keep-alive request to keep Supabase alive.",

            "phonepe_txn_id": "",
            "phonepe_order_id": "",
            "payment_amount": "0",
            "payment_status": "not applicable",

            "submittedAt": "'"$(date -Iseconds)"'"
          }'
