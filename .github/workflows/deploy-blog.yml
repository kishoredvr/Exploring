# .github/workflows/deploy-blog.yml
name: Deploy Blog Only

on:
  push:
    paths:
      - 'blog/**'           # Only trigger on blog changes
      - '.github/workflows/deploy-blog.yml'
  workflow_dispatch:        # Allow manual trigger

# Add this to prevent conflicts with static.yml
concurrency:
  group: "pages-blog"      # Different group than your main site
  cancel-in-progress: false

jobs:
  build-blog:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout
        uses: actions/checkout@v3
        
      - name: Setup Ruby for Jekyll
        uses: ruby/setup-ruby@v1
        with:
          ruby-version: '3.1'
          
      - name: Build Jekyll Blog
        run: |
          echo "ðŸš€ Building only the blog..."
          cd blog
          gem install jekyll --no-document
          jekyll build --destination ../_site/blog
          echo "âœ… Blog built at _site/blog/"
          
      - name: Deploy to GitHub Pages
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./_site/blog          # Deploy only blog
          destination_dir: ./blog             # Output to /blog subfolder
          keep_files: false                   # Don't keep other files
